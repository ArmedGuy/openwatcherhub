FROM nginxinc/nginx-s3-gateway

ENV S3_SERVER_PROTO "https"
ENV S3_SERVER "eodata.dataspace.copernicus.eu"
ENV S3_BUCKET_NAME "eodata"
ENV S3_REGION "eu-west-1"
ENV S3_SERVER_PORT "443"
ENV S3_STYLE "virtual"
ENV AWS_SIGS_VERSION "4"

ENV PROXY_CACHE_MAX_SIZE "10g"
ENV PROXY_CACHE_INACTIVE "2d"
ENV PROXY_CACHE_VALID_OK "2d"
ENV PROXY_CACHE_VALID_NOTFOUND "1s"
ENV PROXY_CACHE_VALID_FORBIDDEN "30s"
ENV ALLOW_DIRECTORY_LIST "true"
ENV CORS_ENABLED 0

COPY default.conf.template /etc/nginx/templates/default.conf.template